(function(){"use strict";var e={3405:function(e,t,a){var r=a(144),s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"web-api",attrs:{id:"app"}},[t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("获取swagger服务列表(第一步)")])]),t("el-form",{ref:"basicsForm",attrs:{model:e.basicsForm,rules:e.basicsRules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"Ip地址",prop:"ip"}},[t("el-radio-group",{on:{change:function(t){e.basicsForm.ip="",e.basicsForm.requestUrl=""}},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[t("el-radio",{attrs:{label:0}},[e._v("默认配置")]),t("el-radio",{attrs:{label:1}},[e._v("自定义")])],1),1==e.radio?t("el-input",{attrs:{placeholder:"例如：http://xxx.xx.xx.xxx:8181"},model:{value:e.basicsForm.ip,callback:function(t){e.$set(e.basicsForm,"ip",t)},expression:"basicsForm.ip"}}):t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择swagger地址"},on:{change:e.handleBasicsIp},model:{value:e.basicsForm.ip,callback:function(t){e.$set(e.basicsForm,"ip",t)},expression:"basicsForm.ip"}},e._l(e.webApiConfig.paths,(function(e){return t("el-option",{key:e.ip,attrs:{label:e.ip,value:e.ip}})})),1)],1),t("el-form-item",{attrs:{label:"请求地址",prop:"requestUrl"}},[t("el-input",{attrs:{disabled:1!=e.radio,placeholder:"例如：/v3/api-docs/swagger-config"},model:{value:e.basicsForm.requestUrl,callback:function(t){e.$set(e.basicsForm,"requestUrl",t)},expression:"basicsForm.requestUrl"}})],1),t("el-form-item",[t("el-button",{staticClass:"web-api-btn",attrs:{type:"primary",id:"copybuttons","data-clipboard-text":e.template},on:{click:e.handleBasics}},[e._v("获取接口服务")])],1)],1)],1),t("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("根据服务生成接口树(第二步)")])]),t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"140px"}},[t("el-form-item",{attrs:{label:"接口服务",prop:"requestUrl"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择接口服务"},model:{value:e.form.requestUrl,callback:function(t){e.$set(e.form,"requestUrl",t)},expression:"form.requestUrl"}},e._l(e.serviceUrls,(function(e){return t("el-option",{key:e.url,attrs:{label:e.name,value:e.url}})})),1)],1),t("el-form-item",{attrs:{label:"调用接口方法名",prop:"apiFuncName"}},[t("el-input",{attrs:{placeholder:"例如：axios,request等"},model:{value:e.form.apiFuncName,callback:function(t){e.$set(e.form,"apiFuncName",t)},expression:"form.apiFuncName"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.getTreeData}},[e._v("获取树数据")])],1)],1)],1),t("el-card",{staticClass:"box-card box-card-tree",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("生成api模板(第三步)")])]),t("div",{staticClass:"tree"},[t("el-tree",{ref:"tree",attrs:{data:e.treeData,"default-expanded-keys":["root"],"show-checkbox":"","node-key":e.props.rowKey,props:e.props}})],1),t("div",{staticClass:"tree-btn"},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleClickGenerateApi}},[e._v("生成api模板")])],1)]),t("el-card",{staticClass:"box-card box-card-template",attrs:{shadow:"never"}},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("复制模板(完成)")])]),t("el-input",{attrs:{type:"textarea",rows:"15"},model:{value:e.template,callback:function(t){e.template=t},expression:"template"}}),t("el-button",{staticClass:"web-api-btn",attrs:{type:"primary",id:"copybuttons","data-clipboard-text":e.template},on:{click:e.handleCopy}},[e._v("复制")]),t("el-button",{on:{click:function(t){e.template=""}}},[e._v("清空")])],1)],1)},i=[],o=a(9669),n=a.n(o),l=a(5934),c=a(9228),d=a.n(c),p=a(2687),u=a.n(p);const h=e=>{var t=/\{(.+?)\}/g;const a=e.match(t),r=[];return console.log(a),a.forEach((e=>{e=e.substr(1),e=e.substr(0,e.length-1),r.push(e)})),r.join(", ")},m=e=>{for(var t=[],a=0;a<e.length;a++){for(var r=0,s=a;s<e.length;s++)e[a]===e[s]&&r++;0!==r&&(0===t.length?(t.push(e[a]),t.push(r)):Number(t[1])<r&&(t[0]=e[a],t[1]=r))}return t};var f={data(){return{basicsForm:{ip:"",requestUrl:""},basicsRules:{ip:{required:!0,message:"ip地址不能为空",trigger:["blur","change"]},requestUrl:{required:!0,message:"请求地址不能为空",trigger:["blur","change"]}},form:{requestUrl:"",apiFuncName:"request"},props:{children:"children",label:"name",rowKey:"id"},vscodeApi:null,treeData:[],template:"",rules:{requestUrl:{required:!0,message:"接口服务不能为空",trigger:["blur","change"]},apiFuncName:{required:!0,message:"调用接口方法名不能为空",trigger:["blur","change"]}},webApiConfig:{},radio:1,serviceUrls:[]}},mounted(){let e=this;e.vscodeApi=acquireVsCodeApi&&acquireVsCodeApi(),window.addEventListener("message",(function(t){e.webApiConfig=t.data.webApiConfig||{};let a=u().get(e.webApiConfig,"paths",[]);a.length&&(e.radio=0,Object.assign(e.basicsForm,a[0])),e.webApiConfig.apiFuncName&&e.$set(e.form,"apiFuncName",e.webApiConfig.apiFuncName)}))},methods:{handleBasicsIp(e){const t=this.webApiConfig.paths.find((t=>t.ip==e))||{};this.basicsForm.requestUrl=t.requestUrl},getTreeData(){this.$refs["basicsForm"].validate((e=>{e&&this.$refs["form"].validate((e=>{e&&n()({methods:"get",url:this.basicsForm.ip+this.form.requestUrl}).then((e=>{let t=u().get(e,"data.paths",[]);this.treeData=this.dataProcessing(t)}))}))}))},dataProcessing(e){const t=[];for(const i in e)for(const a in e[i])e[i][a].path=i,e[i][a].method=a,t.push(e[i][a]);const a=[];let r=[];t.forEach((e=>{r=[...r,...e.tags]}));const s=Array.from(new Set(r));return s.forEach((e=>{const r={};r.id=(0,l.Z)(),r.name=e,r.children=this.getChildrenItem(t,e),a.push(r)})),a.length?[{path:"",methods:"",name:"所有",id:"root",children:a}]:[]},getChildrenItem(e,t){const a=[];for(let r=0;r<e.length;r++)if(e[r].tags.includes(t)){const t={};t.id=(0,l.Z)(),t.name=e[r].summary,t.data=e[r],a.push(t)}return a},handleBasics(){this.$refs["basicsForm"].validate((e=>{e&&n()({methods:"get",url:this.basicsForm.ip+this.basicsForm.requestUrl}).then((e=>{this.serviceUrls=u().get(e,"data.urls",[]),this.vscodeApi&&this.vscodeApi.postMessage({command:"tips",text:"获取服务数据成功"})}))}))},camelCase(e){return u().camelCase(e)},handleClickGenerateApi(){let e=this.$refs.tree.getCheckedNodes();const t=e.filter((e=>e?.data?.path));if(t&&t.length){const e=t.map((e=>e.data.path)),a=m(e),r=/\{(.+?)\}/g;let s="";t.forEach((e=>{let t="";t=a[1]>1&&e.data.path===a[0]?"post"===e.data.method?`req-${e.data.path}-save`:"put"===e.data.method?`req-${e.data.path}-update`:"delete"===e.data.method?`req-${e.data.path}-delete`:`req-${e.data.path}`:`req-${e.data.path}`;const i=this.camelCase(t);if(s+="/**\n",s+="* "+e.name+"\n",s+="* @param data\n",s+="* @return {AxiosPromise}\n",s+="*/\n",e.data.path.match(r)){const t=h(e.data.path);s+="export const "+i+" = ("+t+", data) => {\n"}else s+="export const "+i+" = (data) => {\n";s+="  return "+this.form.apiFuncName+"({\n",s+="    url: `"+e.data.path.replaceAll("{","${")+"`,\n",s+='    method: "'+e.data.method+'",\n',s+="    data\n",s+="  });\n",s+="};\n",s+="\n"})),this.template=s}},handleCopy(){let e=this,t=new(d())("#copybuttons");t.on("success",(a=>{e.vscodeApi&&e.vscodeApi.postMessage({command:"tips",text:"复制成功"}),t.destroy()})),t.on("error",(e=>{t.destroy()}))}}},b=f,g=a(1001),v=(0,g.Z)(b,s,i,!1,null,"8e4d23ce",null),x=v.exports,y=a(4720),w=a.n(y);r["default"].use(w()),r["default"].config.productionTip=!1,new r["default"]({render:e=>e(x)}).$mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,r,s,i){if(!r){var o=1/0;for(d=0;d<e.length;d++){r=e[d][0],s=e[d][1],i=e[d][2];for(var n=!0,l=0;l<r.length;l++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(n=!1,i<o&&(o=i));if(n){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={826:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],n=r[1],l=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(l)var d=l(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},r=self["webpackChunkvue"]=self["webpackChunkvue"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(3405)}));r=a.O(r)})();
//# sourceMappingURL=index.64749c81.js.map